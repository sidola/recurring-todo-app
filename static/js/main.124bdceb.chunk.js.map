{"version":3,"sources":["util/recur-engine.ts","redux/actions.ts","component/TodoListName.tsx","component/ListRenamingInput.tsx","component/DeleteTodoListModal.tsx","component/TodoListHeader.tsx","component/TodoList.tsx","component/ListOfTodoLists.tsx","App.tsx","serviceWorker.ts","redux/store.ts","redux/local-storage.ts","index.tsx"],"names":["calculateRecurs","recurs","now","nowDate","Date","periodLengthMs","period","length","Error","getPeriodLengthAsMilli","periodStartDate","previouslyRecurred","startFrom","nextRecurDate","addMilliseconds","isAfter","hasRecurred","previousRecurredDate","timeUntilRecurs","differenceInMilliseconds","possiblyTheFuture","AppActions","resetRecuringItems","createAction","addTodoItem","action","p","updateItem","deleteItem","renameList","updateWhenListRecurs","a","createNewList","deleteList","copyList","changeActiveList","AppReducers","state","newLists","lists","map","list","recursCalc","modifiedAt","items","item","isChecked","updateList","TodoListName","props","className","style","cursor","onClick","this","handleBeginRename","listName","Button","minWidth","disabled","copyDisabled","size","color","onCopy","deleteDisabled","onDelete","React","Component","ListRenamingInput","newListName","currentListName","handleInput","bind","Input","onFocus","event","target","select","autoFocus","value","onChange","onKeyDown","key","handleEndRename","onBlur","input","setState","DeleteTodoListModal","Modal","backdrop","fade","isOpen","toggle","handleClose","ModalHeader","ModalBody","ModalFooter","handleDelete","TodoListHeader","renamingList","deleteModalVisible","beginRenameList","endRenameList","toggleDeleteModalVisiblity","id","disableDelete","connect","disp","listId","name","TodoList","newItemName","showModify","handleCreateNewItem","handleNewItemNameChanged","handleItemCheckbox","toggleEdit","handleResetDateChanged","handleResetTimeChanged","preventDefault","trim","uuid","createdAt","itemText","checked","prevState","newDate","oldHours","getHours","oldMinutes","getMinutes","newStartFrom","setSeconds","setMinutes","setHours","newTime","isFuture","newHours","newMinutes","listItems","sort","b","localeCompare","unCompletedItems","filter","completedItems","tabIndex","onKeyPress","Row","Col","lg","Label","type","min","handleResetLengthChanged","CustomInput","handleResetPeriodChanged","selected","maxDate","dateFormat","strictParsing","date","maxTime","minTime","startOfDay","timeCaption","showTimeSelect","showTimeSelectOnly","timeIntervals","timeFormat","Form","onSubmit","placeholder","label","itemId","TimeUntil","resetDateTime","lightFormat","resetsIn","format","title","ListItemContent","itemProgress","ListOfTodoLists","handleChangeActiveList","activeListId","aRecurs","bRecurs","completedLists","nonEmptyNonCompletedLists","emptyLists","ListGroup","flush","isActive","ListGroupItem","tag","active","App","Container","activeList","fontSize","packageJson","version","Boolean","window","location","hostname","match","createEmptyList","firstListUuid","initState","reduxDevTools","composeWithDevTools","actionsBlacklist","store","createStore","getType","payload","prunedListsList","listIndex","findIndex","nextIndex","listToCopy","find","newList","concat","push","updatedItem","listToUpdate","jsonState","localStorage","getItem","JSON","parse","test","error","console","loadFromLocalStorage","subscribe","stringify","setItem","saveToLocalStorage","getState","dispatch","setInterval","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.124bdceb.chunk.js","sourcesContent":["import { Recurs, List } from \"../model/models\";\nimport { differenceInMilliseconds, addMilliseconds, isAfter } from \"date-fns\";\n\nfunction getPeriodLengthAsMilli(recurs: Recurs) {\n    const HOUR_AS_MILLI = 3600000\n\n    switch (recurs.period) {\n        case \"weeks\": {\n            return (recurs.length * 24 * 7) * HOUR_AS_MILLI\n        }\n\n        case \"days\": {\n            return (recurs.length * 24) * HOUR_AS_MILLI\n        }\n\n        case \"hours\": {\n            return recurs.length * HOUR_AS_MILLI\n        }\n\n        default: {\n            throw new Error(`Unhandled recurs period: ${recurs.period}`)\n        }\n    }\n}\n\nexport function calculateRecurs(recurs: Recurs, now?: Date): {\n    hasRecurred: boolean,\n    previousRecurredDate: Date,\n    timeUntilRecurs: number,\n} {\n\n    const nowDate: Date = (now ? now : new Date())\n    const periodLengthMs = getPeriodLengthAsMilli(recurs)\n\n    const periodStartDate: Date = (recurs.previouslyRecurred)\n        ? recurs.previouslyRecurred\n        : recurs.startFrom\n\n    const nextRecurDate = addMilliseconds(periodStartDate, periodLengthMs)\n\n    if (isAfter(nextRecurDate, nowDate)) {\n        return {\n            hasRecurred: false,\n            previousRecurredDate: periodStartDate,\n            timeUntilRecurs: differenceInMilliseconds(nextRecurDate, nowDate),\n        }\n    }\n\n    // At this point, we know we have recurred, what we need to do now\n    // is figure out if we've skipped intervals and calculate the correct\n    // value for previousRecurredDate\n    let previousRecurredDate = nextRecurDate\n\n    while (true) {\n        const possiblyTheFuture = addMilliseconds(previousRecurredDate, periodLengthMs)\n\n        // This means the next occurrance will happen in the future\n        // So the current previousRecurredDate is the correct one\n        if (isAfter(possiblyTheFuture, nowDate)) {\n            break\n        }\n\n        // If it wasn't in the future, it's safe to increment our\n        // date with one more period\n        previousRecurredDate = addMilliseconds(previousRecurredDate, periodLengthMs)\n    }\n\n    return {\n        hasRecurred: true,\n        previousRecurredDate: previousRecurredDate,\n        timeUntilRecurs: differenceInMilliseconds(nextRecurDate, nowDate),\n    }\n}\n\nexport function updateList(list: List) {\n    const recursCalc = calculateRecurs(list.recurs)\n\n    if (recursCalc.hasRecurred === false) {\n        return list\n    }\n\n    const updatedList: List = {\n        ...list,\n        recurs: {\n            ...list.recurs,\n            previouslyRecurred: recursCalc.previousRecurredDate,\n        },\n        modifiedAt: new Date(),\n        items: list.items.map(item => {\n            return {\n                ...item,\n                isChecked: false,\n                modifiedAt: new Date()\n            }\n        })\n    }\n\n    return updatedList\n}\n","import { createAction } from \"typesafe-actions\";\nimport { Item, Recurs } from \"../model/models\";\nimport { RootState } from \"./store\";\nimport { updateList } from \"../util/recur-engine\";\n\nexport const AppActions = {\n\n    resetRecuringItems: createAction('@HIDDEN/resetRecuringItems'),\n\n    addTodoItem: createAction('addTodoItem', action => {\n        return (p: { listId: string, item: Item }) => action(p)\n    }),\n\n    updateItem: createAction('updateItem', action => {\n        return (p: { listId: string, item: Item }) => action(p)\n    }),\n\n    deleteItem: createAction('deleteItem', action => {\n        return (p: { listId: string, itemId: string }) => action(p)\n    }),\n\n    renameList: createAction('renameList', action => {\n        return (p: { listId: string, name: string }) => action(p)\n    }),\n\n    updateWhenListRecurs: createAction('updateWhenListRecurs', a => {\n        return (p: { listId: string, recurs: Recurs }) => a(p)\n    }),\n\n    createNewList: createAction('createNewList'),\n\n    deleteList: createAction('deleteList', action => {\n        return (p: { listId: string }) => action(p)\n    }),\n\n    copyList: createAction('copyList', action => {\n        return (p: { listId: string }) => action(p)\n    }),\n\n    changeActiveList: createAction('changeActiveList', action => {\n        return (p: { listId: string }) => action(p)\n    }),\n\n}\n\nexport const AppReducers = {\n\n    resetRecuringItems: (\n        state: RootState,\n        action: ReturnType<typeof AppActions.resetRecuringItems>\n    ) => {\n\n        const newLists = state.lists.map(list => {\n            return updateList(list)\n        })\n\n        return {\n            ...state,\n            lists: newLists\n        }\n\n    }\n\n}\n","import React from 'react'\nimport { Button } from 'reactstrap'\n\ninterface Props {\n    listName: string,\n    handleBeginRename: () => void,\n    deleteDisabled: boolean,\n    copyDisabled: boolean,\n    onDelete: () => void,\n    onCopy: () => void,\n}\n\ninterface State {\n}\n\nexport default class TodoListName extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props)\n    }\n\n    public render() {\n        return (\n            <div className=\"mb-4 d-flex align-items-center\">\n                <h2 className=\"w-100 mb-0 mr-2 list-name-text\" style={{ cursor: \"pointer\" }} onClick={this.props.handleBeginRename}>\n                    {this.props.listName}\n                </h2>\n\n                <Button\n                    style={{ minWidth: \"60px\" }}\n                    className=\"ml-2\"\n                    disabled={this.props.copyDisabled}\n                    size=\"sm\"\n                    color=\"secondary\"\n                    onClick={this.props.onCopy}>\n\n                    Copy\n\n                </Button>\n                <Button\n                    style={{ minWidth: \"60px\" }}\n                    className=\"ml-2\"\n                    disabled={this.props.deleteDisabled}\n                    size=\"sm\"\n                    color=\"danger\"\n                    onClick={this.props.onDelete}>\n\n                    Delete\n\n                </Button>\n            </div>\n        )\n    }\n\n}\n","import React from 'react'\nimport { Input } from 'reactstrap'\n\ninterface Props {\n    currentListName: string,\n    handleEndRename: (newListName: string) => void\n}\n\ninterface State {\n    newListName: string,\n}\n\nexport default class ListRenamingInput extends React.Component<Props, State> {\n\n    readonly state = {\n        newListName: this.props.currentListName\n    }\n\n    constructor(props: Props) {\n        super(props)\n\n        this.handleInput = this.handleInput.bind(this)\n    }\n\n    public render() {\n        return (\n            <div className=\"mb-4 d-flex flex-column\">\n                <Input\n                    onFocus={(event) => event.target.select()}\n                    autoFocus={true}\n                    value={this.state.newListName}\n                    onChange={this.handleInput}\n                    onKeyDown={(event: React.KeyboardEvent<HTMLInputElement>) => {\n                        if (event.key === \"Enter\") {\n                            this.props.handleEndRename(this.state.newListName)\n                        }\n                    }}\n                    onBlur={() => {\n                        this.props.handleEndRename(this.state.newListName)\n                    }}\n                />\n            </div>\n        )\n    }\n\n    private handleInput(event: any) {\n        const input = event.target.value as string\n\n        this.setState({\n            newListName: input\n        })\n    }\n\n}\n","import React from 'react'\nimport { ModalFooter, Modal, ModalHeader, ModalBody, Button } from 'reactstrap'\n\ninterface Props {\n    isOpen: boolean\n    handleClose: () => void,\n    handleDelete: () => void,\n}\n\ninterface State {\n}\n\nexport default class DeleteTodoListModal extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props)\n    }\n\n    public render() {\n        return (\n            <Modal backdrop={\"static\"} fade={false} isOpen={this.props.isOpen} toggle={this.props.handleClose}>\n                <ModalHeader toggle={this.props.handleClose}>Confirm</ModalHeader>\n                <ModalBody>\n                    You're about to remove a list that contains items. This action\n                    cannot be undone. Do you want to continue?\n                </ModalBody>\n                <ModalFooter>\n                    <Button color=\"danger\" onClick={this.props.handleDelete}>\n                        Delete list\n                    </Button>\n\n                    <Button color=\"secondary\" onClick={this.props.handleClose}>\n                        Cancel\n                    </Button>\n                </ModalFooter>\n            </Modal>\n        )\n    }\n\n}\n","import React, { Dispatch, Fragment } from 'react'\nimport TodoListName from './TodoListName'\nimport ListRenamingInput from './ListRenamingInput'\nimport { ActionType } from 'typesafe-actions'\nimport { AppActions } from '../redux/actions'\nimport { RootState } from '../redux/store'\nimport { List } from '../model/models'\nimport { connect } from 'react-redux'\nimport DeleteTodoListModal from './DeleteTodoListModal'\n\nfunction mapStateToProps(state: RootState) {\n    return {\n        // Cannot delete last list\n        disableDelete: state.lists.length === 1\n    }\n}\n\nfunction mapDispToProps(disp: Dispatch<ActionType<typeof AppActions>>) {\n    return {\n        renameList: (listId: string, name: string) =>\n            disp(AppActions.renameList({ listId, name })),\n\n        deleteList: (listId: string) =>\n            disp(AppActions.deleteList({ listId })),\n\n        copyList: (listId: string) =>\n            disp(AppActions.copyList({ listId })),\n    }\n}\n\ntype Props = ReturnType<typeof mapDispToProps>\n    & ReturnType<typeof mapStateToProps>\n    & { list: List }\n\ntype State = {\n    renamingList: boolean,\n    deleteModalVisible: boolean,\n}\n\nclass TodoListHeader extends React.Component<Props, State> {\n\n    readonly state = {\n        renamingList: false,\n        deleteModalVisible: false,\n    }\n\n    constructor(props: Props) {\n        super(props)\n\n        this.beginRenameList = this.beginRenameList.bind(this)\n        this.endRenameList = this.endRenameList.bind(this)\n        this.toggleDeleteModalVisiblity = this.toggleDeleteModalVisiblity.bind(this)\n    }\n\n    public render() {\n\n        return (\n            <Fragment>\n\n                <DeleteTodoListModal\n                    isOpen={this.state.deleteModalVisible}\n                    handleClose={this.toggleDeleteModalVisiblity}\n                    handleDelete={() => {\n                        this.props.deleteList(this.props.list.id)\n                        this.toggleDeleteModalVisiblity()\n                    }} />\n\n                {this.state.renamingList &&\n                    <ListRenamingInput\n                        currentListName={this.props.list.listName}\n                        handleEndRename={this.endRenameList} />\n                }\n\n                {this.state.renamingList === false &&\n                    <TodoListName\n                        listName={this.props.list.listName}\n                        handleBeginRename={this.beginRenameList}\n                        deleteDisabled={this.props.disableDelete}\n                        copyDisabled={this.props.list.items.length <= 0}\n                        onDelete={() => {\n                            if (this.props.list.items.length > 0) {\n                                this.toggleDeleteModalVisiblity()\n                            } else {\n                                this.props.deleteList(this.props.list.id)\n                            }\n                        }}\n                        onCopy={() => {\n                            if (this.props.list.items.length > 0) {\n                                this.props.copyList(this.props.list.id)\n                            }\n                        }}\n                    />\n                }\n            </Fragment>\n        )\n    }\n\n    private beginRenameList() {\n        this.setState({\n            renamingList: true,\n        })\n    }\n\n    private endRenameList(newListName: string) {\n        if (newListName !== \"\") {\n            this.props.renameList(this.props.list.id, newListName)\n        }\n\n        this.setState({\n            renamingList: false,\n        })\n    }\n\n    private toggleDeleteModalVisiblity() {\n        this.setState((state) => {\n            return {\n                deleteModalVisible: !state.deleteModalVisible\n            }\n        })\n    }\n\n}\n\nexport default connect(mapStateToProps, mapDispToProps)(TodoListHeader)\n","import React, { Fragment, Dispatch } from \"react\";\nimport { List, Item, Recurs } from \"../model/models\";\nimport { Input, CustomInput, Label, Button, Form, Row, Col } from \"reactstrap\";\nimport { ActionType } from \"typesafe-actions\";\nimport { AppActions } from \"../redux/actions\";\nimport { connect } from \"react-redux\";\nimport * as uuid from \"uuid\"\nimport { RootState } from \"../redux/store\";\nimport { setHours, setMinutes, isFuture, startOfDay, setSeconds } from \"date-fns\";\nimport ReactDatePicker from \"react-datepicker\";\nimport TodoListHeader from \"./TodoListHeader\";\n\nfunction mapStateToProps(state: RootState) {\n    return {\n        // Cannot delete last list\n        disableDelete: state.lists.length === 1\n    }\n}\n\nfunction mapDispToProps(disp: Dispatch<ActionType<typeof AppActions>>) {\n    return {\n        addTodoItem: (listId: string, item: Item) =>\n            disp(AppActions.addTodoItem({ listId, item })),\n\n        updateItem: (listId: string, item: Item) =>\n            disp(AppActions.updateItem({ listId, item })),\n\n        deleteItem: (listId: string, itemId: string) =>\n            disp(AppActions.deleteItem({ listId, itemId })),\n\n        updateWhenListRecurs: (listId: string, recurs: Recurs) =>\n            disp(AppActions.updateWhenListRecurs({ listId, recurs }))\n    }\n}\n\ntype Props = ReturnType<typeof mapDispToProps>\n    & ReturnType<typeof mapStateToProps>\n    & { list: List }\n\nclass TodoList extends React.Component<Props, {\n    newItemName: string,\n    renamingList: boolean,\n    showModify: boolean,\n}> {\n\n    readonly state = {\n        newItemName: \"\",\n        renamingList: false,\n        showModify: false,\n    }\n\n    public constructor(props: Props) {\n        super(props)\n\n        this.handleCreateNewItem = this.handleCreateNewItem.bind(this)\n        this.handleNewItemNameChanged = this.handleNewItemNameChanged.bind(this)\n        this.handleItemCheckbox = this.handleItemCheckbox.bind(this)\n        this.toggleEdit = this.toggleEdit.bind(this)\n        this.handleResetDateChanged = this.handleResetDateChanged.bind(this)\n        this.handleResetTimeChanged = this.handleResetTimeChanged.bind(this)\n    }\n\n    public handleNewItemNameChanged(event: any) {\n        this.setState({\n            newItemName: event.target.value\n        })\n    }\n\n    public handleCreateNewItem(event: any) {\n        event.preventDefault()\n\n        if (this.state.newItemName.trim() === \"\") {\n            this.setState({\n                newItemName: \"\"\n            })\n\n            return\n        }\n\n        this.props.addTodoItem(\n            this.props.list.id,\n            {\n                id: uuid.v1(),\n                createdAt: new Date(),\n                modifiedAt: new Date(),\n                itemText: this.state.newItemName,\n                isChecked: false,\n            }\n        )\n\n        this.setState({\n            newItemName: \"\",\n        })\n    }\n\n    public handleItemCheckbox(item: Item, checked: boolean) {\n        this.props.updateItem(this.props.list.id, {\n            ...item,\n            isChecked: checked,\n            modifiedAt: new Date(),\n        })\n    }\n\n    private handleResetPeriodChanged(event: React.ChangeEvent<HTMLInputElement>) {\n        const { value } = event.target as any\n\n        if (!value) {\n            return\n        }\n\n        const listId = this.props.list.id\n\n        const recurs: Recurs = {\n            ...this.props.list.recurs,\n            period: value,\n            length: 1,\n            startFrom: new Date(),\n            previouslyRecurred: null,\n        }\n\n        this.props.updateWhenListRecurs(listId, recurs)\n    }\n\n    private handleResetLengthChanged(event: any) {\n        const { value } = event.target\n\n        // TODO: Assert not less than 1\n        if (!value || value < 1) {\n            return\n        }\n\n        const listId = this.props.list.id\n\n        const recurs: Recurs = {\n            ...this.props.list.recurs,\n            length: event.target.value,\n            previouslyRecurred: null,\n        }\n\n        this.props.updateWhenListRecurs(listId, recurs)\n    }\n\n    private toggleEdit() {\n        this.setState((prevState) => {\n            return {\n                showModify: !prevState.showModify\n            }\n        })\n    }\n\n    private handleResetDateChanged(newDate: Date) {\n        const { startFrom } = this.props.list.recurs\n\n        const oldHours = startFrom.getHours()\n        const oldMinutes = startFrom.getMinutes()\n\n        const newStartFrom = setSeconds(setMinutes(setHours(newDate, oldHours), oldMinutes), 0)\n\n        const { id } = this.props.list\n\n        this.props.updateWhenListRecurs(id, {\n            ...this.props.list.recurs,\n            startFrom: newStartFrom,\n            previouslyRecurred: null,\n        })\n    }\n\n    private handleResetTimeChanged(newTime: Date) {\n        if (isFuture(newTime)) {\n            return\n        }\n\n        const { startFrom } = this.props.list.recurs\n\n        const newHours = newTime.getHours()\n        const newMinutes = newTime.getMinutes()\n\n        const newStartFrom = setSeconds(setMinutes(setHours(startFrom, newHours), newMinutes), 0)\n\n        const { id } = this.props.list\n        this.props.updateWhenListRecurs(id, {\n            ...this.props.list.recurs,\n            startFrom: newStartFrom,\n            previouslyRecurred: null,\n        })\n    }\n\n    public render() {\n\n        const listItems = this.props.list.items.sort((a, b) => {\n            return a.itemText.localeCompare(b.itemText)\n        })\n\n        const unCompletedItems = listItems.filter(item => item.isChecked === false)\n        const completedItems = listItems.filter(item => item.isChecked)\n\n        return (\n            <Fragment>\n                <TodoListHeader list={this.props.list} />\n\n                <div\n                    tabIndex={0}\n                    className=\"p-2 pl-3 bg-light border\"\n                    style={{ cursor: \"pointer\" }}\n                    onClick={this.toggleEdit}\n                    onKeyPress={this.toggleEdit}\n                >\n                    Edit\n                </div>\n\n                {this.state.showModify &&\n                    <div className=\"p-3 border border-top-0\">\n                        <Row>\n                            <Col lg={4}>\n                                <Label>Reset every</Label>\n                                <Input\n                                    type=\"number\"\n                                    min={1}\n                                    value={this.props.list.recurs.length}\n                                    onChange={(event) => {\n                                        this.handleResetLengthChanged(event)\n                                    }}\n                                />\n                            </Col>\n                            <Col lg={8} className=\"mt-2 mt-lg-0 d-flex align-items-end\">\n                                <CustomInput\n                                    type=\"select\"\n                                    id={`recurType-${this.props.list.id}`}\n                                    value={this.props.list.recurs.period}\n                                    onChange={(event) => {\n                                        this.handleResetPeriodChanged(event)\n                                    }}>\n                                    <option value=\"weeks\">Weeks</option>\n                                    <option value=\"days\">Days</option>\n                                    <option value=\"hours\">Hours</option>\n                                </CustomInput>\n                            </Col>\n\n                            <Fragment>\n                                <Col lg={6} className=\"mt-3 d-flex flex-column\">\n                                    <Label>Starting from</Label>\n\n                                    <ReactDatePicker\n                                        className=\"form-control\"\n                                        selected={this.props.list.recurs.startFrom}\n                                        maxDate={new Date()}\n                                        dateFormat={['yyyy-MM-dd', 'yyyyMMdd']}\n                                        strictParsing={true}\n                                        onChange={(date) => {\n                                            if (date === null) {\n                                                return\n                                            }\n\n                                            this.handleResetDateChanged(date)\n                                        }}\n                                    />\n\n                                </Col>\n                                <Col lg={6} className=\"mt-2 mt-lg-0 d-flex flex-column justify-content-end\">\n                                    <ReactDatePicker\n                                        className=\"form-control\"\n                                        selected={this.props.list.recurs.startFrom}\n                                        maxTime={new Date()}\n                                        minTime={startOfDay(new Date())}\n                                        timeCaption=\"Time\"\n                                        showTimeSelect={true}\n                                        showTimeSelectOnly={true}\n                                        timeIntervals={15}\n                                        timeFormat={'HH:mm'}\n                                        dateFormat={['HH:mm', 'HHmm']}\n                                        strictParsing={true}\n                                        onChange={(date) => {\n                                            if (date === null) {\n                                                return\n                                            }\n\n                                            this.handleResetTimeChanged(date)\n                                        }}\n                                    />\n                                </Col>\n                            </Fragment>\n                        </Row>\n                        <Row>\n                            <Col>\n                                <div className=\"mt-3\">\n                                    <Label>Add new item</Label>\n                                    <Form className=\"d-flex\" onSubmit={this.handleCreateNewItem}>\n                                        <Input\n                                            type=\"text\"\n                                            value={this.state.newItemName}\n                                            onChange={this.handleNewItemNameChanged}\n                                            placeholder=\"Press enter to add\"\n                                        />\n                                    </Form>\n                                </div>\n                            </Col>\n                        </Row>\n                    </div>\n                }\n\n                <div className=\"mt-3\">\n                    {listItems.length === 0 && (\n                        <p>You have no items, create a new one!</p>\n                    )}\n\n                    <ul className=\"list-unstyled\">\n                        {unCompletedItems.map(item => {\n\n                            return (\n                                <li className=\"p-2 pl-3 mb-2 w-100 d-flex justify-content-between align-items-center border\" key={item.id}>\n                                    <div className=\"d-flex align-items-center\">\n                                        <CustomInput\n                                            id={`cb-${item.id}`}\n                                            type=\"checkbox\"\n                                            checked={item.isChecked}\n                                            label={item.itemText}\n                                            onChange={() => {\n                                                this.handleItemCheckbox(item, !item.isChecked)\n                                            }}\n                                        />\n                                    </div>\n\n                                    <Button\n                                        size=\"sm\"\n                                        color=\"link\"\n                                        onClick={() => this.props.deleteItem(this.props.list.id, item.id)}>\n                                        Delete\n                                    </Button>\n                                </li>\n                            )\n\n                        })}\n                    </ul>\n\n                    {completedItems.length > 0 &&\n                        <Fragment>\n                            <hr />\n\n                            <ul className=\"mt-3 list-unstyled\">\n                                {completedItems.map(item => {\n\n                                    return (\n                                        <li className=\"p-2 pl-3 mb-2 w-100 d-flex justify-content-between align-items-center border\" key={item.id}>\n                                            <div className=\"d-flex align-items-center\">\n                                                <CustomInput\n                                                    id={`cb-${item.id}`}\n                                                    type=\"checkbox\"\n                                                    checked={item.isChecked}\n                                                    label={item.itemText}\n                                                    onChange={() => {\n                                                        this.handleItemCheckbox(item, !item.isChecked)\n                                                    }}\n                                                />\n                                            </div>\n\n                                            <Button\n                                                size=\"sm\"\n                                                color=\"link\"\n                                                onClick={() => this.props.deleteItem(this.props.list.id, item.id)}>\n                                                Delete\n                                            </Button>\n                                        </li>\n                                    )\n\n                                })}\n                            </ul>\n                        </Fragment>\n                    }\n                </div>\n            </Fragment >\n        )\n    }\n}\n\nexport default connect(mapStateToProps, mapDispToProps)(TodoList)\n","import React, { Dispatch, Fragment } from \"react\";\nimport { List } from \"../model/models\";\nimport { ListGroup, ListGroupItem, Button } from \"reactstrap\";\nimport { ActionType } from \"typesafe-actions\";\nimport { AppActions } from \"../redux/actions\";\nimport { connect } from \"react-redux\";\nimport { format } from 'timeago.js';\nimport { addMilliseconds, lightFormat } from \"date-fns\";\nimport { calculateRecurs } from \"../util/recur-engine\";\n\nfunction mapDispToProps(disp: Dispatch<ActionType<typeof AppActions>>) {\n    return {\n        createNewList: () =>\n            disp(AppActions.createNewList()),\n\n        changeActiveList: (listId: string) =>\n            disp(AppActions.changeActiveList({ listId }))\n    }\n}\n\ntype Props = ReturnType<typeof mapDispToProps>\n    & {\n        activeListId: string,\n        lists: List[]\n    }\n\nconst TimeUntil: React.FC<{ list: List }> = props => {\n    const resetDateTime = lightFormat(addMilliseconds(new Date(), calculateRecurs(props.list.recurs).timeUntilRecurs), \"yyyy-MM-dd HH:mm\")\n    const resetsIn = format(addMilliseconds(new Date(), calculateRecurs(props.list.recurs).timeUntilRecurs))\n\n    return (\n        <small title={resetDateTime}>\n            Resets {resetsIn}\n        </small>\n    )\n}\n\nconst ListItemContent: React.FC<{ list: List }> = props => {\n    const itemProgress = `${props.list.items.filter(item => item.isChecked).length + \" of \" + props.list.items.length} completed`\n\n    return (\n        <div className=\"d-flex justify-content-between align-items-center\">\n            <div className=\"d-flex flex-column w-100\">\n                <div className=\"mb-1 font-weight-bold\">\n                    {props.list.listName}\n                </div>\n                <div className=\"d-flex justify-content-between w-100\">\n                    <div className=\"small\">\n                        {itemProgress}\n                    </div>\n                    <TimeUntil list={props.list} />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nclass ListOfTodoLists extends React.Component<Props> {\n\n    public constructor(props: Props) {\n        super(props)\n\n        this.handleChangeActiveList = this.handleChangeActiveList.bind(this)\n    }\n\n    private handleChangeActiveList(listId: string) {\n        if (listId === this.props.activeListId) {\n            return\n        }\n\n        this.props.changeActiveList(listId)\n    }\n\n    public render() {\n        const lists = this.props.lists.sort((a, b) => {\n            const aRecurs = calculateRecurs(a.recurs).timeUntilRecurs\n            const bRecurs = calculateRecurs(b.recurs).timeUntilRecurs\n\n            if (aRecurs === bRecurs) {\n                return a.listName.localeCompare(b.listName)\n            }\n\n            return aRecurs - bRecurs\n        })\n\n        const completedLists = lists.filter(list => {\n            return list.items.length > 0 && list.items.filter(item => item.isChecked).length === list.items.length\n        })\n\n        const nonEmptyNonCompletedLists = lists.filter(list => {\n            return list.items.length > 0 && list.items.filter(item => item.isChecked).length !== list.items.length\n        })\n\n        const emptyLists = lists.filter(list => {\n            return list.items.length === 0\n        })\n\n        return (\n            <Fragment>\n                <div className=\"border\">\n\n                    <div className=\"px-3 pt-3 mb-3 d-flex justify-content-between align-items-center\">\n                        <h3 className=\"m-0\">Lists</h3>\n                        <Button size=\"sm\" onClick={this.props.createNewList}>New</Button>\n                    </div>\n\n                    <ListGroup flush={true}>\n                        {nonEmptyNonCompletedLists.map(list => {\n                            const isActive = list.id === this.props.activeListId\n\n                            return (\n                                <ListGroupItem\n                                    key={list.id}\n                                    tag=\"button\"\n                                    action\n                                    active={isActive}\n                                    onClick={() => this.handleChangeActiveList(list.id)}>\n\n                                    <ListItemContent list={list} />\n                                </ListGroupItem>\n                            )\n                        })}\n                    </ListGroup>\n\n                </div>\n\n                {completedLists.length > 0 &&\n                    <div>\n                        <h6 className=\"mt-4\">Completed</h6>\n                        <div className=\"border\">\n                            <ListGroup flush={true}>\n                                {completedLists.map(list => {\n                                    const isActive = list.id === this.props.activeListId\n\n                                    return (\n                                        <ListGroupItem\n                                            color=\"success\"\n                                            key={list.id}\n                                            tag=\"button\"\n                                            action\n                                            active={isActive}\n                                            onClick={() => this.handleChangeActiveList(list.id)}>\n\n                                            <ListItemContent list={list} />\n                                        </ListGroupItem>\n                                    )\n                                })}\n                            </ListGroup>\n                        </div>\n                    </div>\n                }\n\n                {emptyLists.length > 0 &&\n                    <div>\n                        <h6 className=\"mt-4\">Empty</h6>\n                        <div className=\"border\">\n                            <ListGroup flush={true}>\n                                {emptyLists.map(list => {\n                                    const isActive = list.id === this.props.activeListId\n\n                                    return (\n                                        <ListGroupItem\n                                            key={list.id}\n                                            tag=\"button\"\n                                            action\n                                            active={isActive}\n                                            onClick={() => this.handleChangeActiveList(list.id)}>\n\n                                            <ListItemContent list={list} />\n                                        </ListGroupItem>\n                                    )\n                                })}\n                            </ListGroup>\n                        </div>\n                    </div>\n                }\n            </Fragment>\n\n        )\n    }\n}\n\nexport default connect(null, mapDispToProps)(ListOfTodoLists)\n","import React from 'react';\nimport { Row, Col, Container } from 'reactstrap';\nimport { List } from './model/models';\nimport { connect } from 'react-redux';\nimport { RootState } from './redux/store';\nimport TodoList from './component/TodoList';\nimport ListOfTodoLists from './component/ListOfTodoLists';\nimport packageJson from '../package.json';\n\ninterface Props {\n    activeList: List\n    lists: List[]\n}\n\nfunction mapStateToProps(state: RootState) {\n    return {\n        activeList: state.lists.filter(list => list.id === state.activeListId)[0],\n        lists: state.lists\n    }\n}\n\nclass App extends React.Component<Props> {\n\n    render() {\n        return (\n            <div className=\"h-100 d-flex flex-column justify-content-between\" >\n                <Container className=\"mt-4 flex-grow-1\">\n                    <Row>\n                        <Col lg={7}>\n\n                            <TodoList list={this.props.activeList} />\n\n                        </Col>\n                        <Col lg={5} className=\"mb-4 order-first\">\n\n                            <ListOfTodoLists activeListId={this.props.activeList.id}\n                                lists={this.props.lists} />\n\n                        </Col>\n                    </Row>\n                </Container>\n                <Container>\n                    <div className=\"mb-3 d-flex flex-shrink-0 justify-content-center justify-content-lg-start\">\n                        <div style={{ color: \"#c3c3c3\", fontSize: \"9px\" }}>\n                            v{packageJson.version}\n                        </div>\n                    </div>\n                </Container>\n            </div>\n        )\n    }\n}\n\nexport default connect(mapStateToProps)(App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { composeWithDevTools } from 'redux-devtools-extension'\nimport { createStore } from \"redux\";\nimport { List } from \"../model/models\";\nimport { AppActions, AppReducers } from \"./actions\";\nimport { ActionType, getType } from \"typesafe-actions\";\nimport * as uuid from 'uuid'\nimport { saveToLocalStorage, loadFromLocalStorage } from './local-storage';\n\nexport interface RootState {\n    activeListId: string,\n    lists: List[]\n}\n\nfunction createEmptyList(): List {\n    const startFrom = new Date()\n\n    return {\n        id: uuid.v1(),\n        createdAt: new Date(),\n        modifiedAt: new Date(),\n        listName: `untitled list`,\n        items: [],\n        recurs: {\n            period: \"weeks\",\n            length: 1,\n            startFrom,\n            previouslyRecurred: null,\n        }\n    }\n}\n\nlet firstListUuid = uuid.v1()\n\nconst initState = (): RootState => {\n    const startFrom = new Date()\n\n    return {\n        activeListId: firstListUuid,\n        lists: [{\n            id: firstListUuid,\n            createdAt: new Date(),\n            modifiedAt: new Date(),\n            listName: `untitled list`,\n            items: [],\n            recurs: {\n                period: \"weeks\",\n                length: 1,\n                startFrom,\n                previouslyRecurred: null,\n            }\n        }]\n    }\n}\n\nfunction rootReducer(\n    state: RootState = initState(),\n    action: ActionType<typeof AppActions>\n): RootState {\n\n    switch (action.type) {\n\n        case (getType(AppActions.resetRecuringItems)): {\n            return AppReducers.resetRecuringItems(state, action)\n        }\n\n        case (getType(AppActions.updateWhenListRecurs)): {\n            const list: List = {\n                ...state.lists.filter(list => list.id === action.payload.listId)[0],\n                modifiedAt: new Date(),\n                recurs: action.payload.recurs\n            }\n\n            return {\n                ...state,\n                lists: [\n                    ...state.lists.filter(list => list.id !== action.payload.listId),\n                    list\n                ]\n            }\n        }\n\n        case (getType(AppActions.changeActiveList)): {\n            return {\n                ...state,\n                activeListId: action.payload.listId,\n            }\n        }\n\n        case (getType(AppActions.deleteList)): {\n            const prunedListsList = state.lists.filter(list => list.id !== action.payload.listId)\n            const listIndex = state.lists.findIndex(list => list.id === action.payload.listId)\n\n            let nextIndex = prunedListsList.length - 1\n\n            if (listIndex <= nextIndex) {\n                nextIndex = listIndex\n            }\n\n            return {\n                ...state,\n                lists: prunedListsList,\n                activeListId: prunedListsList[nextIndex].id\n            }\n        }\n\n        case (getType(AppActions.copyList)): {\n\n            const listToCopy = state.lists.find(list => list.id === action.payload.listId) as List\n\n            const newList: List = createEmptyList()\n            newList.listName = \"Copy of \".concat(listToCopy.listName)\n\n            newList.recurs = {\n                ...listToCopy.recurs\n            }\n\n            newList.items = [\n                ...listToCopy.items\n            ]\n\n            return {\n                ...state,\n                lists: [\n                    ...state.lists,\n                    newList,\n                ]\n            }\n        }\n\n        case (getType(AppActions.createNewList)): {\n\n            const newList = createEmptyList()\n\n            return {\n                ...state,\n                lists: [\n                    ...state.lists,\n                    newList\n                ],\n                activeListId: newList.id,\n            }\n        }\n\n        case (getType(AppActions.addTodoItem)): {\n\n            const list = state.lists.filter(list => list.id === action.payload.listId)[0]\n            list.items.push(action.payload.item)\n\n            return {\n                ...state,\n                lists: [\n                    ...state.lists.filter(list => list.id !== action.payload.listId),\n                    {\n                        ...list,\n                        items: [\n                            ...list.items\n                        ]\n                    }\n                ]\n            }\n        }\n\n        case (getType(AppActions.deleteItem)): {\n            const list = state.lists.filter(list => list.id === action.payload.listId)[0]\n\n            return {\n                ...state,\n                lists: [\n                    ...state.lists.filter(list => list.id !== action.payload.listId),\n                    {\n                        ...list,\n                        items: [\n                            ...list.items.filter(item => item.id !== action.payload.itemId)\n                        ]\n                    }\n                ]\n            }\n        }\n\n        case (getType(AppActions.updateItem)): {\n\n            const list = state.lists.filter(list => list.id === action.payload.listId)[0]\n            const updatedItem = action.payload.item\n\n            return {\n                ...state,\n                lists: [\n                    ...state.lists.filter(list => list.id !== action.payload.listId),\n                    {\n                        ...list,\n                        items: [\n                            ...list.items.filter(item => item.id !== updatedItem.id),\n                            updatedItem,\n                        ]\n                    }\n                ]\n            }\n\n        }\n\n        case (getType(AppActions.renameList)): {\n\n            const listToUpdate = state.lists.filter(list => list.id === action.payload.listId)[0]\n\n            return {\n                ...state,\n                lists: [\n                    ...state.lists.filter(list => list.id !== action.payload.listId),\n                    {\n                        ...listToUpdate,\n                        listName: action.payload.name,\n                    }\n                ]\n            }\n\n        }\n\n    }\n\n    return state\n}\n\nconst reduxDevTools = composeWithDevTools({\n    actionsBlacklist: '@HIDDEN/resetRecuringItems'\n})\n\nexport const store = createStore(\n    rootReducer,\n    loadFromLocalStorage(),\n    reduxDevTools()\n)\n\nstore.subscribe(() => {\n    saveToLocalStorage(store.getState())\n})\n","import { RootState } from \"./store\";\n\nexport function saveToLocalStorage(state: RootState) {\n    const jsonState = JSON.stringify(state)\n    window.localStorage.setItem('state', jsonState)\n}\n\nexport function loadFromLocalStorage(): RootState | undefined {\n\n    try {\n\n        const jsonState = window.localStorage.getItem('state')\n\n        if (jsonState == null) {\n            return undefined\n        }\n\n        // https://stackoverflow.com/a/24660721/1891491\n        return JSON.parse(jsonState, function (name, value) {\n            if (typeof value === \"string\" && /^\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d.\\d\\d\\dZ$/.test(value)) {\n                return new Date(value);\n            }\n            return value;\n        })\n\n    } catch (error) {\n        console.error(error);\n        return undefined\n    }\n\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './css/index.scss';\nimport 'react-datepicker/dist/react-datepicker.css'\nimport { Provider } from 'react-redux';\nimport { store } from './redux/store';\nimport { AppActions } from './redux/actions';\n\nstore.dispatch(AppActions.resetRecuringItems())\n\nsetInterval(() => {\n    store.dispatch(AppActions.resetRecuringItems())\n}, 1000)\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>\n    , document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}