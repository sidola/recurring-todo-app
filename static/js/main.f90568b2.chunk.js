(window["webpackJsonprecurring-todos"]=window["webpackJsonprecurring-todos"]||[]).push([[0],{143:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(16),s=n.n(r),c=n(26),l=n(27),o=n(33),u=n(28),d=n(34),m=n(164),p=n(155),h=n(156),f=n(24),b=n(23),g=n(9),v=n(165),y=n(150),O=n(151),w=n(152),j=n(153),E=n(154),I=n(157),L=n(158),N=n(159),k=n(12),C={resetRecuringItems:Object(k.createAction)("resetRecuringItems"),addTodoItem:Object(k.createAction)("addTodoItem",function(e){return function(t){return e(t)}}),updateItem:Object(k.createAction)("updateItem",function(e){return function(t){return e(t)}}),deleteItem:Object(k.createAction)("deleteItem",function(e){return function(t){return e(t)}}),renameList:Object(k.createAction)("renameList",function(e){return function(t){return e(t)}}),updateWhenListRecurs:Object(k.createAction)("updateWhenListRecurs",function(e){return function(t){return e(t)}}),createNewList:Object(k.createAction)("createNewList"),deleteList:Object(k.createAction)("deleteList",function(e){return function(t){return e(t)}}),changeActiveList:Object(k.createAction)("changeActiveList",function(e){return function(t){return e(t)}})},D=n(40),R=n(106),x=n(107),T=n(108),A=n(149),P=n(25),S=n(61),M=n.n(S);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={newItemName:"",renamingList:!1,newListName:"",showModify:!1,deleteModalVisible:!1},n.handleCreateNewItem=n.handleCreateNewItem.bind(Object(g.a)(n)),n.handleNewItemNameChanged=n.handleNewItemNameChanged.bind(Object(g.a)(n)),n.handleItemCheckbox=n.handleItemCheckbox.bind(Object(g.a)(n)),n.handleRenameListInput=n.handleRenameListInput.bind(Object(g.a)(n)),n.toggleEdit=n.toggleEdit.bind(Object(g.a)(n)),n.handleResetDateChanged=n.handleResetDateChanged.bind(Object(g.a)(n)),n.handleResetTimeChanged=n.handleResetTimeChanged.bind(Object(g.a)(n)),n.toggleDeleteModalVisiblity=n.toggleDeleteModalVisiblity.bind(Object(g.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleRenameListInput",value:function(e){this.setState({newListName:e.target.value})}},{key:"handleNewItemNameChanged",value:function(e){this.setState({newItemName:e.target.value})}},{key:"handleCreateNewItem",value:function(e){e.preventDefault(),""!==this.state.newItemName.trim()?(this.props.addTodoItem(this.props.list.id,{id:D.v1(),createdAt:new Date,modifiedAt:new Date,itemText:this.state.newItemName,isChecked:!1}),this.setState({newItemName:""})):this.setState({newItemName:""})}},{key:"handleItemCheckbox",value:function(e,t){this.props.updateItem(this.props.list.id,W({},e,{isChecked:t,modifiedAt:new Date}))}},{key:"beginRenameList",value:function(){this.setState({newListName:this.props.list.listName,renamingList:!0})}},{key:"endRenameList",value:function(){""!==this.state.newListName.trim()&&this.props.renameList(this.props.list.id,this.state.newListName),this.setState({newListName:"",renamingList:!1})}},{key:"handleResetPeriodChanged",value:function(e){var t=e.target.value;if(t){var n=this.props.list.id,a=W({},this.props.list.recurs,{period:t,startFrom:new Date,length:1});this.props.updateWhenListRecurs(n,a)}}},{key:"handleResetLengthChanged",value:function(e){var t=e.target.value;if(t&&!(t<1)){var n=this.props.list.id,a=W({},this.props.list.recurs,{length:e.target.value});this.props.updateWhenListRecurs(n,a)}}},{key:"toggleEdit",value:function(){this.setState(function(e){return{showModify:!e.showModify}})}},{key:"handleResetDateChanged",value:function(e){var t=this.props.list.recurs.startFrom,n=t.getHours(),a=t.getMinutes(),i=Object(R.default)(Object(x.default)(Object(T.default)(e,n),a),0),r=this.props.list.id;this.props.updateWhenListRecurs(r,W({},this.props.list.recurs,{startFrom:i}))}},{key:"handleResetTimeChanged",value:function(e){if(!Object(A.a)(e)){var t=this.props.list.recurs.startFrom,n=e.getHours(),a=e.getMinutes(),i=Object(R.default)(Object(x.default)(Object(T.default)(t,n),a),0),r=this.props.list.id;this.props.updateWhenListRecurs(r,W({},this.props.list.recurs,{startFrom:i}))}}},{key:"toggleDeleteModalVisiblity",value:function(){this.setState(function(e){return{deleteModalVisible:!e.deleteModalVisible}})}},{key:"render",value:function(){var e=this,t=this.props.list.items.sort(function(e,t){return e.itemText.localeCompare(t.itemText)}),n=t.filter(function(e){return!1===e.isChecked}),r=t.filter(function(e){return e.isChecked});return i.a.createElement(a.Fragment,null,i.a.createElement(v.a,{backdrop:"static",fade:!1,isOpen:this.state.deleteModalVisible,toggle:this.toggleDeleteModalVisiblity},i.a.createElement(y.a,{toggle:this.toggleDeleteModalVisiblity},"Confirm"),i.a.createElement(O.a,null,"You're about to remove a list that contains items. This action cannot be undone. Do you want to continue?"),i.a.createElement(w.a,null,i.a.createElement(j.a,{color:"danger",onClick:function(){e.props.deleteList(e.props.list.id),e.toggleDeleteModalVisiblity()}},"Delete list"),i.a.createElement(j.a,{color:"secondary",onClick:this.toggleDeleteModalVisiblity},"Cancel"))),!1===this.state.renamingList&&i.a.createElement("div",{className:"mb-4 d-flex align-items-center"},i.a.createElement("h2",{className:"w-100",style:{cursor:"pointer"},onClick:function(){e.beginRenameList()}},this.props.list.listName),i.a.createElement(j.a,{disabled:this.props.disableDelete,size:"sm",onClick:function(){e.props.list.items.length>0?e.toggleDeleteModalVisiblity():e.props.deleteList(e.props.list.id)}},"Delete")),this.state.renamingList&&i.a.createElement("div",{className:"mb-4 d-flex flex-column"},i.a.createElement(E.a,{autoFocus:!0,value:this.state.newListName,onChange:this.handleRenameListInput,onKeyDown:function(t){"Enter"===t.key&&e.endRenameList()},onBlur:function(){e.endRenameList()}})),i.a.createElement("div",{tabIndex:0,className:"p-2 pl-3 bg-light border",style:{cursor:"pointer"},onClick:this.toggleEdit,onKeyPress:this.toggleEdit},"Edit"),this.state.showModify&&i.a.createElement("div",{className:"p-3 border border-top-0"},i.a.createElement(p.a,null,i.a.createElement(h.a,{lg:4,className:"mt-3 mt-lg-0"},i.a.createElement(I.a,null,"Reset every"),i.a.createElement(E.a,{type:"number",min:1,value:this.props.list.recurs.length,onChange:function(t){e.handleResetLengthChanged(t)}})),i.a.createElement(h.a,{lg:8,className:"mt-2 mt-lg-0 d-flex align-items-end"},i.a.createElement(L.a,{type:"select",id:"recurType-".concat(this.props.list.id),value:this.props.list.recurs.period,onChange:function(t){e.handleResetPeriodChanged(t)}},i.a.createElement("option",{value:"weeks"},"Weeks"),i.a.createElement("option",{value:"days"},"Days"),i.a.createElement("option",{value:"hours"},"Hours"))),i.a.createElement(a.Fragment,null,i.a.createElement(h.a,{lg:6,className:"mt-3 d-flex flex-column"},i.a.createElement(I.a,null,"Start date"),i.a.createElement(M.a,{className:"form-control",selected:this.props.list.recurs.startFrom,maxDate:new Date,dateFormat:["yyyy-MM-dd","yyyyMMdd"],strictParsing:!0,onChange:function(t){null!==t&&e.handleResetDateChanged(t)}})),i.a.createElement(h.a,{lg:6,className:"mt-3 d-flex flex-column"},i.a.createElement(I.a,null,"Start time"),i.a.createElement(M.a,{className:"form-control",selected:this.props.list.recurs.startFrom,maxTime:new Date,minTime:Object(P.default)(new Date),timeCaption:"Time",showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeFormat:"HH:mm",dateFormat:["HH:mm","HHmm"],strictParsing:!0,onChange:function(t){null!==t&&e.handleResetTimeChanged(t)}}))))),i.a.createElement("div",{className:"mt-3"},i.a.createElement(N.a,{className:"d-flex",onSubmit:this.handleCreateNewItem},i.a.createElement(E.a,{type:"text",value:this.state.newItemName,onChange:this.handleNewItemNameChanged,placeholder:"Add new item..."}))),i.a.createElement("div",{className:"mt-3"},0===t.length&&i.a.createElement("p",null,"You have no items, create a new one!"),i.a.createElement("ul",{className:"list-unstyled"},n.map(function(t){return i.a.createElement("li",{className:"p-2 pl-3 mb-2 w-100 d-flex justify-content-between align-items-center border",key:t.id},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement(L.a,{id:"cb-".concat(t.id),type:"checkbox",checked:t.isChecked,label:t.itemText,onChange:function(){e.handleItemCheckbox(t,!t.isChecked)}})),i.a.createElement(j.a,{size:"sm",color:"link",onClick:function(){return e.props.deleteItem(e.props.list.id,t.id)}},"Delete"))})),r.length>0&&i.a.createElement(a.Fragment,null,i.a.createElement("hr",null),i.a.createElement("ul",{className:"mt-3 list-unstyled"},r.map(function(t){return i.a.createElement("li",{className:"p-2 pl-3 mb-2 w-100 d-flex justify-content-between align-items-center border",key:t.id},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement(L.a,{id:"cb-".concat(t.id),type:"checkbox",checked:t.isChecked,label:t.itemText,onChange:function(){e.handleItemCheckbox(t,!t.isChecked)}})),i.a.createElement(j.a,{size:"sm",color:"link",onClick:function(){return e.props.deleteItem(e.props.list.id,t.id)}},"Delete"))})))))}}]),t}(i.a.Component),H=Object(f.b)(function(e){return{disableDelete:1===e.lists.length}},function(e){return{addTodoItem:function(t,n){return e(C.addTodoItem({listId:t,item:n}))},updateItem:function(t,n){return e(C.updateItem({listId:t,item:n}))},deleteItem:function(t,n){return e(C.deleteItem({listId:t,itemId:n}))},renameList:function(t,n){return e(C.renameList({listId:t,name:n}))},deleteList:function(t){return e(C.deleteList({listId:t}))},updateWhenListRecurs:function(t,n){return e(C.updateWhenListRecurs({listId:t,recurs:n}))}}})(V),U=n(162),z=n(163),J=n(77),B=n(161),K=n(30),Y=n(126),$=n(160);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function G(e,t){var n=t||new Date,a=function(e){switch(e.period){case"weeks":return 24*e.length*7*36e5;case"days":return 24*e.length*36e5;case"hours":return 36e5*e.length;default:throw new Error("Unhandled recurs period: ".concat(e.period))}}(e),i=e.previouslyRecurred?e.previouslyRecurred:e.startFrom,r=Object(K.a)(i,a);if(Object(Y.default)(r,n))return{hasRecurred:!1,previousRecurredDate:i,timeUntilRecurs:Object($.a)(r,n)};for(var s=r;;){var c=Object(K.a)(s,a);if(Object(Y.default)(c,n))break;s=Object(K.a)(s,a)}return{hasRecurred:!0,previousRecurredDate:s,timeUntilRecurs:Object($.a)(r,n)}}var Q=function(e){var t=Object(B.a)(Object(K.a)(new Date,G(e.list.recurs).timeUntilRecurs),"yyyy-MM-dd HH:mm"),n=Object(J.format)(Object(K.a)(new Date,G(e.list.recurs).timeUntilRecurs));return i.a.createElement("small",{title:t},"Resets ",n)},X=function(e){var t="".concat(e.list.items.filter(function(e){return e.isChecked}).length+" of "+e.list.items.length," completed");return i.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},i.a.createElement("div",{className:"d-flex flex-column w-100"},i.a.createElement("div",{className:"mb-1 font-weight-bold"},e.list.listName),i.a.createElement("div",{className:"d-flex justify-content-between w-100"},i.a.createElement("div",{className:"small"},t),i.a.createElement(Q,{list:e.list}))))},_=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChangeActiveList=n.handleChangeActiveList.bind(Object(g.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChangeActiveList",value:function(e){e!==this.props.activeListId&&this.props.changeActiveList(e)}},{key:"render",value:function(){var e=this,t=this.props.lists.sort(function(e,t){var n=G(e.recurs).timeUntilRecurs,a=G(t.recurs).timeUntilRecurs;return n===a?e.listName.localeCompare(t.listName):n-a}),n=t.filter(function(e){return e.items.length>0&&e.items.filter(function(e){return e.isChecked}).length===e.items.length}),r=t.filter(function(e){return 0===e.items.length||e.items.filter(function(e){return e.isChecked}).length!==e.items.length});return i.a.createElement(a.Fragment,null,i.a.createElement("div",{className:"border"},i.a.createElement("div",{className:"px-3 pt-3 mb-3 d-flex justify-content-between align-items-center"},i.a.createElement("h3",{className:"m-0"},"Lists"),i.a.createElement(j.a,{size:"sm",onClick:this.props.createNewList},"New")),i.a.createElement(U.a,{flush:!0},r.map(function(t){var n=t.id===e.props.activeListId;return i.a.createElement(z.a,{key:t.id,tag:"button",action:!0,active:n,onClick:function(){return e.handleChangeActiveList(t.id)}},i.a.createElement(X,{list:t}))}))),n.length>0&&i.a.createElement("div",{className:"mt-2 border"},i.a.createElement(U.a,{flush:!0},n.map(function(t){var n=t.id===e.props.activeListId;return i.a.createElement(z.a,{color:"success",key:t.id,tag:"button",action:!0,active:n,onClick:function(){return e.handleChangeActiveList(t.id)}},i.a.createElement(X,{list:t}))}))))}}]),t}(i.a.Component),ee=Object(f.b)(null,function(e){return{createNewList:function(){return e(C.createNewList())},changeActiveList:function(t){return e(C.changeActiveList({listId:t}))}}})(_);var te=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"my-4 d-flex justify-content-center w-100"},i.a.createElement(m.a,null,i.a.createElement(p.a,null,i.a.createElement(h.a,{lg:7},i.a.createElement(H,{list:this.props.activeList})),i.a.createElement(h.a,{lg:5,className:"mb-4 order-first"},i.a.createElement(ee,{activeListId:this.props.activeList.id,lists:this.props.lists})))))}}]),t}(i.a.Component),ne=Object(f.b)(function(e){return{activeList:e.lists.filter(function(t){return t.id===e.activeListId})[0],lists:e.lists}})(te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(143),n(144);var ae=n(20),ie=n(78),re=n(36);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var le=D.v1(),oe=function(){var e=new Date;return{activeListId:le,lists:[{id:le,createdAt:new Date,modifiedAt:new Date,listName:"untitled list",items:[],recurs:{period:"weeks",length:1,startFrom:e,previouslyRecurred:null}}]}};var ue=Object(re.createStore)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(k.getType)(C.resetRecuringItems):var n=e.lists.map(function(e){return function(e){var t=G(e.recurs);return!1===t.hasRecurred?e:q({},e,{recurs:q({},e.recurs,{previouslyRecurred:t.previousRecurredDate}),modifiedAt:new Date,items:e.items.map(function(e){return q({},e,{isChecked:!1,modifiedAt:new Date})})})}(e)});return ce({},e,{lists:n});case Object(k.getType)(C.updateWhenListRecurs):var a=ce({},e.lists.filter(function(e){return e.id===t.payload.listId})[0],{modifiedAt:new Date,recurs:t.payload.recurs});return ce({},e,{lists:[].concat(Object(ae.a)(e.lists.filter(function(e){return e.id!==t.payload.listId})),[a])});case Object(k.getType)(C.changeActiveList):return ce({},e,{activeListId:t.payload.listId});case Object(k.getType)(C.deleteList):var i=e.lists.filter(function(e){return e.id!==t.payload.listId}),r=e.lists.findIndex(function(e){return e.id===t.payload.listId}),s=i.length-1;return r<=s&&(s=r),ce({},e,{lists:i,activeListId:i[s].id});case Object(k.getType)(C.createNewList):var c=function(){var e=new Date;return{id:D.v1(),createdAt:new Date,modifiedAt:new Date,listName:"untitled list",items:[],recurs:{period:"weeks",length:1,startFrom:e,previouslyRecurred:null}}}();return ce({},e,{lists:[].concat(Object(ae.a)(e.lists),[c]),activeListId:c.id});case Object(k.getType)(C.addTodoItem):var l=e.lists.filter(function(e){return e.id===t.payload.listId})[0];return l.items.push(t.payload.item),ce({},e,{lists:[].concat(Object(ae.a)(e.lists.filter(function(e){return e.id!==t.payload.listId})),[ce({},l,{items:Object(ae.a)(l.items)})])});case Object(k.getType)(C.deleteItem):var o=e.lists.filter(function(e){return e.id===t.payload.listId})[0];return ce({},e,{lists:[].concat(Object(ae.a)(e.lists.filter(function(e){return e.id!==t.payload.listId})),[ce({},o,{items:Object(ae.a)(o.items.filter(function(e){return e.id!==t.payload.itemId}))})])});case Object(k.getType)(C.updateItem):var u=e.lists.filter(function(e){return e.id===t.payload.listId})[0],d=t.payload.item;return ce({},e,{lists:[].concat(Object(ae.a)(e.lists.filter(function(e){return e.id!==t.payload.listId})),[ce({},u,{items:[].concat(Object(ae.a)(u.items.filter(function(e){return e.id!==d.id})),[d])})])});case Object(k.getType)(C.renameList):var m=e.lists.filter(function(e){return e.id===t.payload.listId})[0];return ce({},e,{lists:[].concat(Object(ae.a)(e.lists.filter(function(e){return e.id!==t.payload.listId})),[ce({},m,{listName:t.payload.name})])})}return e},function(){try{var e=window.localStorage.getItem("state");if(null==e)return;return JSON.parse(e,function(e,t){return"string"===typeof t&&/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d.\d\d\dZ$/.test(t)?new Date(t):t})}catch(t){return void console.error(t)}}(),Object(ie.composeWithDevTools)());ue.subscribe(function(){!function(e){var t=JSON.stringify(e);window.localStorage.setItem("state",t)}(ue.getState())}),setInterval(function(){ue.dispatch(C.resetRecuringItems())},5e3),s.a.render(i.a.createElement(f.a,{store:ue},i.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,t,n){e.exports=n(145)}},[[79,1,2]]]);
//# sourceMappingURL=main.f90568b2.chunk.js.map